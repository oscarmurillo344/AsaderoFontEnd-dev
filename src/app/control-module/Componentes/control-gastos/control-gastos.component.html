<mat-expansion-panel [expanded]="cerrado">
    <mat-expansion-panel-header>
      <mat-panel-title>
       Seleccione filtro: 
      </mat-panel-title>
      <mat-panel-description>
        presione aqui
      </mat-panel-description>
    </mat-expansion-panel-header>
    
        <form [formGroup]="tipoForm">
          <mat-form-field style="width: 47%;" appearance="fill">
            <mat-label>Seleccione tipo: </mat-label>
            <mat-select formControlName="elegir">
              <mat-option value="todo">todos</mat-option>
              <mat-option value="factura">facturas</mat-option>
              <mat-option value="diario">diarios</mat-option>
              <mat-option value="empleado">empleados</mat-option>
            </mat-select>
          </mat-form-field>
  
          <mat-form-field style="width: 47%;margin-left: 2%;" appearance="fill">
            <mat-label>Seleccione usuario: </mat-label>
            <mat-select formControlName="usuario" >
              <mat-option value="todo">todos</mat-option>
              <mat-option *ngFor="let usua of user"
               [value]="usua.nombreUsuario"  >
               {{usua.nombre}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill" style="width: 90%;">
            <mat-label>Ingrese rango de fechas: </mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate formControlName="start" placeholder="Start date">
          <input matEndDate formControlName="end" placeholder="End date">
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
          </mat-form-field>

          <button mat-raised-button style="width: 100%;" (click)="ListarGastos2()"
          [disabled]="!tipoForm.valid">
            Listar
          </button>

        </form>
      </mat-expansion-panel>

      <mat-form-field  style="width: 95%; margin-left: 2%; padding-top: 3%;" >
        <mat-label>filtro por descripci&oacute;n</mat-label>
        <input matInput (keyup)="applyFilter($event)" #input>
      </mat-form-field>

<table *ngIf="complete; else progress" mat-table [dataSource]="DataGastos" multiTemplateDataRows>

  <ng-container matColumnDef="{{column}}" *ngFor="let column of GastosColumns">
    <th mat-header-cell *matHeaderCellDef> {{column}} </th>
    <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
    <td mat-footer-cell *matFooterCellDef>{{(column==='valor')?valorGasto:'' | currency }}  </td>
  </ng-container>

  <ng-container matColumnDef="detailExpand">
    <td mat-cell *matCellDef="let element ; index as i" [attr.colspan]="GastosColumns.length">
      <div class="example-element-detail"
           [@detailExpand]="element == gastos ? 'expanded' : 'collapsed'">
          <div > {{ i+1}} </div>
          <div > {{element.tipo }} </div>
          <div>  {{element.valor | currency}}</div>
            <button  mat-mini-fab color="warn" (click)="Eliminar(i)" >
              <mat-icon>
                delete
              </mat-icon>
            </button>
        <div class="example-element-description">
          {{element.descripcion}}
        </div>
      </div>
    </td>
  </ng-container>      
        <tr mat-header-row *matHeaderRowDef="GastosColumns;"></tr>
        <tr mat-row *matRowDef="let row; columns: GastosColumns;"
            class="example-element-row"
            [class.example-expanded-row]="gastos === element"
            (click)="gastos = gastos === element ? null : element"></tr>
        <tr mat-row *matRowDef="let row; columns: ['detailExpand']" class="example-detail-row"></tr>
        <tr mat-footer-row *matFooterRowDef="GastosColumns; sticky:true"></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No existe gastos...</td>
        </tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
        <ng-template #progress >
          <mat-spinner color="warn" style="margin: auto; margin-top: 50px;"></mat-spinner>
        </ng-template>

